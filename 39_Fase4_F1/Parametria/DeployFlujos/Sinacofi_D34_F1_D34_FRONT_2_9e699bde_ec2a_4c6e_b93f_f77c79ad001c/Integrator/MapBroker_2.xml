<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<MapBrokers xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="MapBrokers_2.xsd">
   <MapBroker dmlCompatibility="2.1" id="cf0945b0-28c2-4639-a6c9-bddbb3e71ab9" label="" lastModified="2024-07-19T22:36:58.000Z" name="MAPSERVICE_Sinacofi_D34_F1_D34_FRONT::MAPSERVICE.Sinacofi_D34_F1.Calcular_Cam" xmlVersion="1.0">
      <DmlMapBroker>
         <InputBusinessDocuments>
            <InputBusinessDocument>
               <BusinessDocument id="5a26c413-5426-4534-8607-9d23965d6be1">
                  <name>MAPSERVICE_Sinacofi_D34_F1_D34_FRONT::MAPSERVICE.Sinacofi_D34_F1\ArchivosEntrada.D34_Archivo_Datos</name>
                  <lastModified>2024-08-13T16:29:23.000Z</lastModified>
               </BusinessDocument>
               <Alias>in</Alias>
            </InputBusinessDocument>
         </InputBusinessDocuments>
         <DecisionPath>
            <StepMappingRule>
               <MappingRule id="1cb16b97-c668-4742-bf9c-e7da78efdc15" label="" lastModified="2024-08-13T16:29:23.000Z" name="MAPSERVICE_Sinacofi_D34_F1_D34_FRONT::MAPSERVICE.Sinacofi_D34_F1.Calcular_Campos:Calcular_Campos" xmlVersion="1.0">
                  <OutputBusinessDocument id="29b6fc93-a3f5-4ed1-bd2a-a3828141c0b1">
                     <name>MAPSERVICE_Sinacofi_D34_F1_D34_FRONT::MAPSERVICE.Sinacofi_D34_F1\Salida.D34_Caratula_Salida</name>
                     <lastModified>2024-08-13T16:29:23.000Z</lastModified>
                  </OutputBusinessDocument>
                  <MappingElement ElementReferenceId="3">
                     <Expression>
                        <DmlExpression><![CDATA[count(\Details) ]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="2">
                     <Expression>
                        <DmlExpression><![CDATA[getSubString(in:\Header\Datos,8,8 )]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="5">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAOD2:=0;
%totalAOE2:=0;
%totalAOF2:=0;
%totalAOG2:=0;
%totalAOH2:=0;
%totalAOI2:=0;
%totalAOJ2:=0;
%totalAOK2:=0;
%totalAOL2:=0;
loop on \Details {
    if ( getSubString(this\Contenido,1,4) ="1105" 
    or getSubString(this\Contenido,1,4)="1110"
or getSubString(this\Contenido,1,4)="1111"
or getSubString(this\Contenido,1,4)="1112"
or getSubString(this\Contenido,1,4)="1115"
or getSubString(this\Contenido,1,4)="1120" 
or getSubString(this\Contenido,1,4)="1125"
or getSubString(this\Contenido,1,4)="1130"
or getSubString(this\Contenido,1,4)="1135"
or getSubString(this\Contenido,1,4)="1140"
or getSubString(this\Contenido,1,4)="1145"
or getSubString(this\Contenido,1,4)="1150"
or getSubString(this\Contenido,1,4)="1155"
or getSubString(this\Contenido,1,4)="1160"
or getSubString(this\Contenido,1,4)="1165"
or getSubString(this\Contenido,1,4)="1170"
or getSubString(this\Contenido,1,4)="1175"
or getSubString(this\Contenido,1,4)="1180") 
    then {
      %totalAOD2:=%totalAOD2+convertToI( getSubString( this\Contenido, 13, 14 ))
            };  
  if ( getSubString(this\Contenido,1,4) ="1205" 
    or getSubString(this\Contenido,1,4)="1210"
    or getSubString(this\Contenido,1,4)="1220"
    or getSubString(this\Contenido,1,4)="1225"
    or getSubString(this\Contenido,1,4)="1230"
    or getSubString(this\Contenido,1,4)="1235"
    or getSubString(this\Contenido,1,4)="1240"
    or getSubString(this\Contenido,1,4)="1245")
 then {
      %totalAOE2:=%totalAOE2+convertToI( getSubString( this\Contenido, 13, 14 ))
            };  
  if ( getSubString(this\Contenido,1,4) ="1305" 
    or getSubString(this\Contenido,1,4)="1309"
    or getSubString(this\Contenido,1,4)="1310")
  then {
      %totalAOF2:=%totalAOF2+convertToI( getSubString( this\Contenido, 13, 14 ))
            };  
     if ( getSubString(this\Contenido,1,4) ="1405" 
    or getSubString(this\Contenido,1,4)="1410"
    or getSubString(this\Contenido,1,4)="1415"
    or getSubString(this\Contenido,1,4)="1420"
    or getSubString(this\Contenido,1,4)="1430"
    or getSubString(this\Contenido,1,4)="1435")
  then {
      %totalAOG2:=%totalAOG2+convertToI( getSubString( this\Contenido, 13, 14 ))
            };  
     if ( getSubString(this\Contenido,1,4) ="1505" 
    or getSubString(this\Contenido,1,4)="1510")
  then {
      %totalAOH2:=%totalAOH2+convertToI( getSubString( this\Contenido, 13, 14 ))
            }; 
   if ( getSubString(this\Contenido,1,4) ="1605" 
    or getSubString(this\Contenido,1,4)="1610"
    or getSubString(this\Contenido,1,4)="1620"
    or getSubString(this\Contenido,1,4)="1630"
    or getSubString(this\Contenido,1,4)="1635")
  then {
      %totalAOI2:=%totalAOI2+convertToI( getSubString( this\Contenido, 13, 14 ))
            }; 
        if ( getSubString(this\Contenido,1,4) ="2105" 
    or getSubString(this\Contenido,1,4)="2110"
    or getSubString(this\Contenido,1,4)="2205")
  then {
      %totalAOJ2:=%totalAOJ2+convertToI( getSubString( this\Contenido, 13, 14 ))
            }; 
 if ( getSubString(this\Contenido,1,4) ="2305" 
    or getSubString(this\Contenido,1,4)="2310")
  then {
      %totalAOK2:=%totalAOK2+convertToI( getSubString( this\Contenido, 13, 14 ))
            }; 
 if ( getSubString(this\Contenido,1,4) ="2405" 
    or getSubString(this\Contenido,1,4)="2410"
    or getSubString(this\Contenido,1,4)="2415"
    or getSubString(this\Contenido,1,4)="2505"
    or getSubString(this\Contenido,1,4)="2510"
    or getSubString(this\Contenido,1,4)="2605")
  then {
      %totalAOL2:=%totalAOL2+convertToI( getSubString( this\Contenido, 13, 14 ))
            }       
};
%totalAOD2]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="6">
                     <Expression>
                        <DmlExpression><![CDATA[count(\Details[where getSubString(item\Contenido,1,4)="1205"
or getSubString(item\Contenido,1,4)="1210"
or getSubString(item\Contenido,1,4)="1220"
or getSubString(item\Contenido,1,4)="1225"
or getSubString(item\Contenido,1,4)="1230"
or getSubString(item\Contenido,1,4)="1235"  
or getSubString(item\Contenido,1,4)="1240"
or getSubString(item\Contenido,1,4)="1245"])]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="4">
                     <Expression>
                        <DmlExpression><![CDATA[count(\Details[where getSubString(item\Contenido,1,4)="1105"
or getSubString(item\Contenido,1,4)="1110" 
or getSubString(item\Contenido,1,4)="1111" 
or getSubString(item\Contenido,1,4)="1112" 
or getSubString(item\Contenido,1,4)="1115" 
or getSubString(item\Contenido,1,4)="1120"  
or getSubString(item\Contenido,1,4)="1125" 
or getSubString(item\Contenido,1,4)="1130" 
or getSubString(item\Contenido,1,4)="1135" 
or getSubString(item\Contenido,1,4)="1140" 
or getSubString(item\Contenido,1,4)="1145" 
or getSubString(item\Contenido,1,4)="1150" 
or getSubString(item\Contenido,1,4)="1155" 
or getSubString(item\Contenido,1,4)="1160" 
or getSubString(item\Contenido,1,4)="1165" 
or getSubString(item\Contenido,1,4)="1170" 
or getSubString(item\Contenido,1,4)="1175" 
or getSubString(item\Contenido,1,4)="1180" ])]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="8">
                     <Expression>
                        <DmlExpression><![CDATA[count(\Details[where getSubString(item\Contenido,1,4)="1305"
or getSubString(item\Contenido,1,4)="1309" 
or getSubString(item\Contenido,1,4)="1310" ])
]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="10">
                     <Expression>
                        <DmlExpression><![CDATA[count(\Details[where getSubString(item\Contenido,1,4)="1405"
or getSubString(item\Contenido,1,4)="1410" 
or getSubString(item\Contenido,1,4)="1415"
or getSubString(item\Contenido,1,4)="1420"
or getSubString(item\Contenido,1,4)="1430"
or getSubString(item\Contenido,1,4)="1435" ])
]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="12">
                     <Expression>
                        <DmlExpression><![CDATA[count(\Details[where getSubString(item\Contenido,1,4)="1505"
or getSubString(item\Contenido,1,4)="1510" ])]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="14">
                     <Expression>
                        <DmlExpression><![CDATA[count(\Details[where getSubString(item\Contenido,1,4)="1605"
or getSubString(item\Contenido,1,4)="1610"
or getSubString(item\Contenido,1,4)="1620"
or getSubString(item\Contenido,1,4)="1630"
or getSubString(item\Contenido,1,4)="1635" ])]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="16">
                     <Expression>
                        <DmlExpression><![CDATA[count(\Details[where getSubString(item\Contenido,1,4)="2105"
or getSubString(item\Contenido,1,4)="2110"
or getSubString(item\Contenido,1,4)="2205" ])]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="18">
                     <Expression>
                        <DmlExpression><![CDATA[count(\Details[where getSubString(item\Contenido,1,4)="2305"
or getSubString(item\Contenido,1,4)="2310" ])]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="20">
                     <Expression>
                        <DmlExpression><![CDATA[count(\Details[where getSubString(item\Contenido,1,4)="2405"
or getSubString(item\Contenido,1,4)="2410"
or getSubString(item\Contenido,1,4)="2415"
or getSubString(item\Contenido,1,4)="2505"
or getSubString(item\Contenido,1,4)="2510"
or getSubString(item\Contenido,1,4)="2605" ])]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="7">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAOE2]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="9">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAOF2]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="11">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAOG2]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="13">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAOH2]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="15">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAOI2]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="17">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAOJ2]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="19">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAOK2]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="21">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAOL2]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
               </MappingRule>
               <StepOutput>
                  <OutputName>out</OutputName>
               </StepOutput>
            </StepMappingRule>
            <StepOutput>
               <OutputName>out1</OutputName>
               <InputBusinessDocumentAlias>in</InputBusinessDocumentAlias>
            </StepOutput>
            <StepOutput>
               <OutputName>out2</OutputName>
               <InputBusinessDocumentAlias>in</InputBusinessDocumentAlias>
            </StepOutput>
            <StepStep>
               <DmlExpression><![CDATA[%correlativoPrefijo:= getSubString(getAttribute( "B2BXGIReceive_ConsumptionFilename" ), 5, 8 );
setDocumentAttributeToOutput( "out1",  "B2BXGISend_ProductionFilename",%correlativoPrefijo &"_datosSalida");
setDocumentAttributeToOutput( "out2",  "B2BXGISend_ProductionFilename",getSubString(getAttribute("B2BXGIReceive_ConsumptionFilename" ), 5, 255) + getAttribute( "B2BXGIReceive_ConsumptionExtension"))]]></DmlExpression>
            </StepStep>
         </DecisionPath>
      </DmlMapBroker>
   </MapBroker>
</MapBrokers>
