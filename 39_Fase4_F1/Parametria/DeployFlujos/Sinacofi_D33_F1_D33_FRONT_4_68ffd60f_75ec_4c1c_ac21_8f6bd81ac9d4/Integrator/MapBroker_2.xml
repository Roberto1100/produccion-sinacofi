<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<MapBrokers xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="MapBrokers_2.xsd">
   <MapBroker dmlCompatibility="2.1" id="cf0945b0-28c2-4639-a6c9-bddbb3e71ab9" label="" lastModified="2024-07-17T16:58:51.000Z" name="MAPSERVICE_Sinacofi_D33_F1_D33_FRONT::MAPSERVICE.Sinacofi_D33_F1.Calcular_Cam" xmlVersion="1.0">
      <DmlMapBroker>
         <InputBusinessDocuments>
            <InputBusinessDocument>
               <BusinessDocument id="5a26c413-5426-4534-8607-9d23965d6be1">
                  <name>MAPSERVICE_Sinacofi_D33_F1_D33_FRONT::MAPSERVICE.Sinacofi_D33_F1\ArchivosEntrada.D33_Archivo_Datos</name>
                  <lastModified>2024-08-13T16:26:37.000Z</lastModified>
               </BusinessDocument>
               <Alias>in</Alias>
            </InputBusinessDocument>
         </InputBusinessDocuments>
         <DecisionPath>
            <StepMappingRule>
               <MappingRule id="1cb16b97-c668-4742-bf9c-e7da78efdc15" label="" lastModified="2024-08-13T16:26:37.000Z" name="MAPSERVICE_Sinacofi_D33_F1_D33_FRONT::MAPSERVICE.Sinacofi_D33_F1.Calcular_Campos:Calcular_Campos" xmlVersion="1.0">
                  <OutputBusinessDocument id="29b6fc93-a3f5-4ed1-bd2a-a3828141c0b1">
                     <name>MAPSERVICE_Sinacofi_D33_F1_D33_FRONT::MAPSERVICE.Sinacofi_D33_F1\Salida.D33_Caratula_Salida</name>
                     <lastModified>2024-08-13T16:26:37.000Z</lastModified>
                  </OutputBusinessDocument>
                  <MappingElement ElementReferenceId="3">
                     <Expression>
                        <DmlExpression><![CDATA[count(\Details) ]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="2">
                     <Expression>
                        <DmlExpression><![CDATA[getSubString(in:\Header\Datos,7,8 )]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="5">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIXR2]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="6">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIXR3]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="7">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIZR1]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="8">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIZR2]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="9">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIZR3]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="10">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIXS1]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="11">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIXS2]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="12">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIXS3	]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="13">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIZS1]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="14">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIZS2]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="15">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIZS3]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="16">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIXT1]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="17">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIXT2]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="18">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIXT3]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="19">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIZT1]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="20">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIZT2]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="21">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIZT3]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="23">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIXU2]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="24">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIXU3]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="25">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIZU1]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="26">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIZU2]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="27">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIZU3]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="28">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIXV1]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="29">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIXV2]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="30">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIXV3]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="31">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIZV1]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="32">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIZV2]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="33">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIZV3]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="34">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIXW1]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="35">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIXW2]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="36">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIXW3]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="37">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIZW1]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="38">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIZW2]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="39">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIZW3]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="4">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIXR1:=0;
%totalAIXR2:=0;
%totalAIXR3:=0;
%totalAIZR1:=0;
%totalAIZR2:=0;
%totalAIZR3:=0;
%totalAIXS1:=0;
%totalAIXS2:=0;
%totalAIXS3:=0;
%totalAIZS1:=0;
%totalAIZS2:=0;
%totalAIZS3:=0;
%totalAIXT1:=0;
%totalAIXT2:=0;
%totalAIXT3:=0;
%totalAIZT1:=0;
%totalAIZT2:=0; 
%totalAIZT3:=0;
loop on \Details {
    if ( getSubString(this\Contenido,9,3) ="001" and getSubString( this\Contenido,12,2) ="11") 
    then {
  	%totalAIXR1:=%totalAIXR1+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
    if ( getSubString( this\Contenido,9,3) ="003" and getSubString( this\Contenido,12,2) ="11") then {
  	%totalAIXR2:=%totalAIXR2+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
    if ( getSubString( this\Contenido,9,3) ="004" and getSubString( this\Contenido,12,2) ="11") then {
  	%totalAIXR3:=%totalAIXR3+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
    if ( getSubString( this\Contenido,9,3) ="005" and getSubString( this\Contenido,12,2) ="11") then {
  	%totalAIZR1:=%totalAIZR1+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
        if ( getSubString( this\Contenido,9,3) ="006" and getSubString( this\Contenido,12,2) ="11") then {
  	%totalAIZR2:=%totalAIZR2+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
            if ( getSubString( this\Contenido,9,3) ="007" and getSubString( this\Contenido,12,2) ="11") then {
  	%totalAIZR3:=%totalAIZR3+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
       if ( getSubString( this\Contenido,9,3) ="001" and getSubString( this\Contenido,12,2) ="12") then {
  	%totalAIXS1:=%totalAIXS1+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
        if ( getSubString( this\Contenido,9,3) ="003" and getSubString( this\Contenido,12,2) ="12") then {
  	%totalAIXS2:=%totalAIXS2+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
         if ( getSubString( this\Contenido,9,3) ="004" and getSubString( this\Contenido,12,2) ="12") then {
  	%totalAIXS3:=%totalAIXS3+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
    if ( getSubString( this\Contenido,9,3) ="005" and getSubString( this\Contenido,12,2) ="12") then {
  	%totalAIZS1:=%totalAIZS1+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
    if ( getSubString( this\Contenido,9,3) ="006" and getSubString( this\Contenido,12,2) ="12") then {
  	%totalAIZS2:=%totalAIZS2+convertToI( getSubString( this\Contenido, 47, 14 ))
    };	
    if ( getSubString( this\Contenido,9,3) ="007" and getSubString( this\Contenido,12,2) ="12") 
    then {
  	%totalAIZS3:=%totalAIZS3+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
    if ( getSubString( this\Contenido,9,3) ="001" and getSubString( this\Contenido,12,2) ="13") then {
  	%totalAIXT1:=%totalAIXT1+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
    if ( getSubString( this\Contenido,9,3) ="003" and getSubString( this\Contenido,12,2) ="13") then {
  	%totalAIXT2:=%totalAIXT2+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
       if ( getSubString( this\Contenido,9,3) ="004" and getSubString( this\Contenido,12,2) ="13") then {
  	%totalAIXT3:=%totalAIXT3+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
    	       if ( getSubString( this\Contenido,9,3) ="005" and getSubString( this\Contenido,12,2) ="13") then {
  	%totalAIZT1:= %totalAIZT1+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
    	       if ( getSubString( this\Contenido,9,3) ="006" and getSubString( this\Contenido,12,2) ="13") then {
  	%totalAIZT2:= %totalAIZT2+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
    	       if ( getSubString( this\Contenido,9,3) ="007" and getSubString( this\Contenido,12,2) ="13") then {
  	%totalAIZT3:= %totalAIZT3+convertToI( getSubString( this\Contenido, 47, 14 ))
    }   
};
%totalAIXR1]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
                  <MappingElement ElementReferenceId="22">
                     <Expression>
                        <DmlExpression><![CDATA[%totalAIXU1:=0;
%totalAIXU2:=0;
%totalAIXU3:=0;
%totalAIZU1:=0;
%totalAIZU2:=0;
%totalAIZU3:=0;
%totalAIXV1:=0;
%totalAIXV2:=0;
%totalAIXV3:=0;
%totalAIZV1:=0;
%totalAIZV2:=0;
%totalAIZV3:=0;
%totalAIXW1:=0;
%totalAIXW2:=0;
%totalAIXW3:=0;
%totalAIZW1:=0;
%totalAIZW2:=0;
%totalAIZW3:=0;
loop on \Details {
          	       if ( getSubString( this\Contenido,9,3) ="001" and getSubString( this\Contenido,12,2) ="24") 
          	       then {
  	%totalAIXU1:= %totalAIXU1+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
    if ( getSubString( this\Contenido,9,3) ="003" and getSubString( this\Contenido,12,2) ="24") 
                then {
  	%totalAIXU2:= %totalAIXU2+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
    if ( getSubString( this\Contenido,9,3) ="004" and getSubString( this\Contenido,12,2) ="24") then {
  	%totalAIXU3:= %totalAIXU3+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
    if ( getSubString( this\Contenido,9,3) ="005" and getSubString( this\Contenido,12,2) ="24") then {
  	%totalAIZU1:= %totalAIZU1+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
    if ( getSubString( this\Contenido,9,3) ="006" and getSubString( this\Contenido,12,2) ="24") then {
  	%totalAIZU2:= %totalAIZU2+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
   if ( getSubString( this\Contenido,9,3) ="007" and getSubString( this\Contenido,12,2) ="24") then {
  	%totalAIZU3:= %totalAIZU3+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
     if ( getSubString( this\Contenido,9,3) ="001" and getSubString( this\Contenido,12,2) ="25") then {
  	%totalAIXV1:= %totalAIXV1+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
    if ( getSubString( this\Contenido,9,3) ="003" and getSubString( this\Contenido,12,2) ="25") then {
  	%totalAIXV2:= %totalAIXV2+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
    if ( getSubString( this\Contenido,9,3) ="004" and getSubString( this\Contenido,12,2) ="25") then {
  	%totalAIXV3:= %totalAIXV3+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
    if ( getSubString( this\Contenido,9,3) ="005" and getSubString( this\Contenido,12,2) ="25") then {
  	%totalAIZV1:= %totalAIZV1+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
   if ( getSubString( this\Contenido,9,3) ="006" and getSubString( this\Contenido,12,2) ="25") then {
  	%totalAIZV2:= %totalAIZV2+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
   if ( getSubString( this\Contenido,9,3) ="007" and getSubString( this\Contenido,12,2) ="25") then {
  	%totalAIZV3:= %totalAIZV3+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
  if ( getSubString( this\Contenido,9,3) ="001" and getSubString( this\Contenido,12,2) ="26") then {
  	%totalAIXW1:= %totalAIXW1+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
  if ( getSubString( this\Contenido,9,3) ="003" and getSubString( this\Contenido,12,2) ="26") then {
  	%totalAIXW2:= %totalAIXW2+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
  if ( getSubString( this\Contenido,9,3) ="004" and getSubString( this\Contenido,12,2) ="26") then {
  	%totalAIXW3:= %totalAIXW3+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
  if ( getSubString( this\Contenido,9,3) ="005" and getSubString( this\Contenido,12,2) ="26") then {
  	%totalAIZW1:= %totalAIZW1+convertToI( getSubString( this\Contenido, 47, 14 ))
    }; 
  if ( getSubString( this\Contenido,9,3) ="006" and getSubString( this\Contenido,12,2) ="26") then {
  	%totalAIZW2:= %totalAIZW2+convertToI( getSubString( this\Contenido, 47, 14 ))
    };
if ( getSubString( this\Contenido,9,3) ="007" and getSubString( this\Contenido,12,2) ="26") then {
  	%totalAIZW3:= %totalAIZW3+convertToI( getSubString( this\Contenido, 47, 14 ))
    }
    };
%totalAIXU1]]></DmlExpression>
                     </Expression>
                     <Comment/>
                  </MappingElement>
               </MappingRule>
               <StepOutput>
                  <OutputName>out</OutputName>
               </StepOutput>
            </StepMappingRule>
            <StepOutput>
               <OutputName>out1</OutputName>
               <InputBusinessDocumentAlias>in</InputBusinessDocumentAlias>
            </StepOutput>
            <StepOutput>
               <OutputName>out2</OutputName>
               <InputBusinessDocumentAlias>in</InputBusinessDocumentAlias>
            </StepOutput>
            <StepStep>
               <DmlExpression><![CDATA[%correlativoPrefijo:= getSubString(getAttribute( "B2BXGIReceive_ConsumptionFilename" ), 5, 8 );
setDocumentAttributeToOutput( "out1",  "B2BXGISend_ProductionFilename",%correlativoPrefijo &"_datosSalida");
setDocumentAttributeToOutput( "out2",  "B2BXGISend_ProductionFilename",getSubString(getAttribute("B2BXGIReceive_ConsumptionFilename" ), 5, 255) + getAttribute( "B2BXGIReceive_ConsumptionExtension"))]]></DmlExpression>
            </StepStep>
         </DecisionPath>
      </DmlMapBroker>
   </MapBroker>
</MapBrokers>
