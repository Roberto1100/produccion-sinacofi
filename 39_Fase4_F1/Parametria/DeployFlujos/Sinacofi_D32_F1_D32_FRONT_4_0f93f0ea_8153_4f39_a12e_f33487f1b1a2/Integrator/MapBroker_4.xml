<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<MapBrokers xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="MapBrokers_2.xsd">
   <MapBroker dmlCompatibility="2.1" id="4015b54a-c649-4e47-b9f7-D32e3e8b10e8" label="" lastModified="2024-07-18T21:10:44.000Z" name="MAPSERVICE_Sinacofi_D32_F1_D32_FRONT::MAPSERVICE.Sinacofi_D32_F1.Insertar_Campos" xmlVersion="1.0">
      <DmlMapBroker>
         <InputBusinessDocuments>
            <InputBusinessDocument>
               <BusinessDocument id="29b6fc93-a3f5-4ed1-bd2a-a3828141c0b1">
                  <name>MAPSERVICE_Sinacofi_D32_F1_D32_FRONT::MAPSERVICE.Sinacofi_D32_F1\Salida.D32_Caratula_Salida</name>
                  <lastModified>2024-08-13T16:25:51.000Z</lastModified>
               </BusinessDocument>
               <Alias>in1</Alias>
            </InputBusinessDocument>
         </InputBusinessDocuments>
         <DecisionPath>
            <StepStep>
               <DmlExpression><![CDATA[%correlativoPrefijo:= getSubString(getAttribute( "B2BXGIReceive_ConsumptionFilename" ), 5, 8 );
%resEstructuraValida:= ValidarEstructuraCAR( %correlativoPrefijo, "PA1|AN7|AN7|ANJ|ANJ|ANK|ANK|ANL|ANL|ANM|ANM|ANN|ANN|AN8|AN8|AN9|AN9|ANP|ANP|ANQ|ANQ|ANR|ANR|ANS|ANS|ANT|ANT|ANU|ANU|ANV|ANV|AN0|AN0|ANW|ANW|ANX|ANX|ANY|ANY|ANZ|ANZ" );
if( %resEstructuraValida = "NK" )then{
	%var_error1:= InsertErrorTBL(
		%correlativoPrefijo,
		"000", 
		"Estructura de caratula ha sido modificada",
		formatString(getDateAndTime(), "CCYY'-'MM'-'DD hh':'mm':'ss")
	);
	%var_error1:= InsertMovTBL(%correlativoPrefijo, null, %var_registro1, null, "00", formatString(getDateAndTime(), "CCYY'-'MM'-'DD hh':'mm':'ss"))
}else{ 
	%ValoresConcatenados:= in1:\Datos\!34!
	& "|" & in1:\Datos\PA1 
	& "|" & in1:\Datos\AN71
& "|" & in1:\Datos\AN72
& "|" & in1:\Datos\ANJ1
& "|" & in1:\Datos\ANJ2
& "|" & in1:\Datos\ANK1
& "|" & in1:\Datos\ANK2
& "|" & in1:\Datos\ANL1
& "|" & in1:\Datos\ANL2
& "|" & in1:\Datos\ANM1
& "|" & in1:\Datos\ANM2
& "|" & in1:\Datos\ANN1
& "|" & in1:\Datos\ANN2
& "|" & in1:\Datos\AN81
& "|" & in1:\Datos\AN82
& "|" & in1:\Datos\AN91
& "|" & in1:\Datos\AN92
& "|" & in1:\Datos\ANP1
& "|" & in1:\Datos\ANP2
& "|" & in1:\Datos\ANQ1
& "|" & in1:\Datos\ANQ2
& "|" & in1:\Datos\ANR1
& "|" & in1:\Datos\ANR2
& "|" & in1:\Datos\ANS1
& "|" & in1:\Datos\ANS2
& "|" & in1:\Datos\ANT1
& "|" & in1:\Datos\ANT2
& "|" & in1:\Datos\ANU1
& "|" & in1:\Datos\ANU2
& "|" & in1:\Datos\ANV1
& "|" & in1:\Datos\ANV2
& "|" & in1:\Datos\AN01
& "|" & in1:\Datos\AN02
& "|" & in1:\Datos\ANW1
& "|" & in1:\Datos\ANW2
& "|" & in1:\Datos\ANX1
& "|" & in1:\Datos\ANX2
& "|" & in1:\Datos\ANY1
& "|" & in1:\Datos\ANY2
& "|" & in1:\Datos\ANZ1
& "|" & in1:\Datos\ANZ2;
	%MovimientoProcesado:=InsertMovTBL(%correlativoPrefijo, null , null, null, "34", formatString(getDateAndTime(), "CCYY'-'MM'-'DD hh':'mm':'ss"));
	%resCargarCampos:= CargarCampos( %correlativoPrefijo , %ValoresConcatenados )
}]]></DmlExpression>
            </StepStep>
            <StepExit/>
         </DecisionPath>
      </DmlMapBroker>
   </MapBroker>
</MapBrokers>
