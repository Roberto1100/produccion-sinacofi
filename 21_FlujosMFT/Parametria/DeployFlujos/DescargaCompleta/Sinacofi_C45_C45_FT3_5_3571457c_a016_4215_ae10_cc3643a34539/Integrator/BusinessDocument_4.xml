<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<BusinessDocuments xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="BusinessDocuments.xsd">
   <BusinessDocument businessDocumentType="Inhouse" dmlCompatibility="2.1" encoding="iso8859" id="ac9f6858-7478-4b5f-af07-ca8390823f9b" label="" lastModified="2024-08-07T21:57:28.000Z" name="MAPSERVICE_Sinacofi_C45_C45_FT3::MAPSERVICE.Sinacofi_C45\ArchivosMomentaneos.C45_Control_Datos_Val" xmlVersion="1.0">
      <Configuration>
         <decimalSeparator>true</decimalSeparator>
         <keepPresenceOfPlusSign>false</keepPresenceOfPlusSign>
         <keepPresenceOfDecimalSeparator>true</keepPresenceOfDecimalSeparator>
         <keepInputNumberOfFractionDigits>true</keepInputNumberOfFractionDigits>
         <keepInputNumberOfDateDigits>true</keepInputNumberOfDateDigits>
         <keepPresenceOfIntegerPlusSign>false</keepPresenceOfIntegerPlusSign>
      </Configuration>
      <Properties>
         <Property name="enableFixedFieldTruncation" value="false"/>
         <Property name="realFormatBehavior" value="false"/>
         <Property name="truncate" value="false"/>
         <Property name="trim" value="none"/>
         <Property name="decimalChar"/>
         <Property name="escapeChar"/>
         <Property name="closeQuote"/>
         <Property name="openQuote"/>
         <Property name="leafElmtDelimiterValue"/>
         <Property name="leafElmtDelimiterType" value="FIXED"/>
         <Property name="parentElmtDelimiterValue"/>
         <Property name="parentElmtDelimiterType" value="FIXED"/>
      </Properties>
      <Elements>
         <ParentElement cargoImpEndSepMandatory="false" cargoImpPreSepMandatory="false" delimiterType="implicit" delimiterValue="" elementType="InhouseParent" label="" maxCard="1" minCard="0" name="Header" order="1" swiftErrorCode="" xmlNamespace="-1" xmlNamespaceParentOrder="-1">
            <LeafElement cargoImpPreSepMandatory="false" cargoImpReference="" defaultValue="" definition="255" definitionType="Length" delimiterType="string" delimiterValue="0x0a" dmlClassName="String" elementType="InhouseLeaf" label="" leafElementPhysicalType="string (len)" maxCard="1" minCard="0" name="Inicio" order="2" xmlNamespace="-1" xmlNamespaceParentOrder="-1">
               <Facet allowDistortion="true" alternativeDelimiterValue="" cargoImpPattern="" closeQuote="" cobolDependingOn="-1" cobolDependingOnParentOrder="-1" decimalChar="" decimalSeparator="false" encoding="iso8859" escapeChar="" exponentialChar="" keepInputNumberOfDateDigits="false" keepInputNumberOfFractionDigits="false" keepPresenceOfDecimalSeparator="true" keepPresenceOfPlusSign="false" maxInclusiveValue="false" maxValue="" minInclusiveValue="false" minValue="" nullable="true" openQuote="" paddingChar=" " paddingPos="1" pattern="" signMinusChar="" signMinusPos="0" signPlusChar="" signPlusPos="0" validCharset="">
                  <Enumerations/>
               </Facet>
            </LeafElement>
            <Facet alternativeDelimiterValue=""/>
         </ParentElement>
         <ParentElement cargoImpEndSepMandatory="false" cargoImpPreSepMandatory="false" delimiterType="implicit" delimiterValue="" elementType="InhouseParent" label="" maxCard="1" minCard="0" name="Details" order="3" swiftErrorCode="" xmlNamespace="-1" xmlNamespaceParentOrder="-1">
            <LeafElement cargoImpPreSepMandatory="false" cargoImpReference="" defaultValue="" definition="9999" definitionType="Length" delimiterType="string" delimiterValue="0x0a" dmlClassName="String" elementType="InhouseLeaf" label="" leafElementPhysicalType="string (len)" maxCard="1" minCard="0" name="Detalles" order="4" xmlNamespace="-1" xmlNamespaceParentOrder="-1">
               <Facet allowDistortion="true" alternativeDelimiterValue="" cargoImpPattern="" closeQuote="" cobolDependingOn="-1" cobolDependingOnParentOrder="-1" decimalChar="" decimalSeparator="false" encoding="iso8859" escapeChar="" exponentialChar="" keepInputNumberOfDateDigits="false" keepInputNumberOfFractionDigits="false" keepPresenceOfDecimalSeparator="true" keepPresenceOfPlusSign="false" maxInclusiveValue="false" maxValue="" minInclusiveValue="false" minValue="" nullable="true" openQuote="" paddingChar=" " paddingPos="1" pattern="" signMinusChar="" signMinusPos="0" signPlusChar="" signPlusPos="0" validCharset="">
                  <Enumerations/>
               </Facet>
            </LeafElement>
            <Facet alternativeDelimiterValue=""/>
         </ParentElement>
         <ParentElement cargoImpEndSepMandatory="false" cargoImpPreSepMandatory="false" delimiterType="implicit" delimiterValue="" elementType="InhouseParent" label="" maxCard="1" minCard="0" name="Footer" order="5" swiftErrorCode="" xmlNamespace="-1" xmlNamespaceParentOrder="-1">
            <LeafElement cargoImpPreSepMandatory="false" cargoImpReference="" defaultValue="" definition="255" definitionType="Length" delimiterType="string" delimiterValue="0x0a" dmlClassName="String" elementType="InhouseLeaf" label="" leafElementPhysicalType="string (len)" maxCard="1" minCard="0" name="Fin" order="6" xmlNamespace="-1" xmlNamespaceParentOrder="-1">
               <Facet allowDistortion="true" alternativeDelimiterValue="!EOF!" cargoImpPattern="" closeQuote="" cobolDependingOn="-1" cobolDependingOnParentOrder="-1" decimalChar="" decimalSeparator="false" encoding="iso8859" escapeChar="" exponentialChar="" keepInputNumberOfDateDigits="false" keepInputNumberOfFractionDigits="false" keepPresenceOfDecimalSeparator="true" keepPresenceOfPlusSign="false" maxInclusiveValue="false" maxValue="" minInclusiveValue="false" minValue="" nullable="true" openQuote="" paddingChar=" " paddingPos="1" pattern="" signMinusChar="" signMinusPos="0" signPlusChar="" signPlusPos="0" validCharset="">
                  <Enumerations/>
               </Facet>
            </LeafElement>
            <Facet alternativeDelimiterValue=""/>
         </ParentElement>
      </Elements>
      <CheckConstraints>
         <CheckConstraint name="InstanciarVariables" order="0">
            <DmlExpression><![CDATA[%Sinacofi_C45.indice:=index(getAttribute( "B2BXGIReceive_ConsumptionFilename" ), "_");
%Sinacofi_C45.indice2:=index(getAttribute( "B2BXGIReceive_ConsumptionFilename"), "_", %Sinacofi_C45.indice + 1);
%Sinacofi_C45.indice3:= index(getAttribute( "B2BXGIReceive_ConsumptionFilename"), "_", %Sinacofi_C45.indice2 + 1);
%Sinacofi_C45.tipoDocumentoPrefijo:= getSubString(getAttribute( "B2BXGIReceive_ConsumptionFilename" ), 1, 3 );
%Sinacofi_C45.correlativoPrefijo:= getSubString(getAttribute( "B2BXGIReceive_ConsumptionFilename" ), 5, 8 );
%Sinacofi_C45.usuarioNAPrefijo:= getSubString(getAttribute( "B2BXGIReceive_ConsumptionFilename" ), %Sinacofi_C45.indice2 + 1, 255 );
%Sinacofi_C45.usuarioPrefijo:= getSubString(%Sinacofi_C45.usuarioNAPrefijo, 1, %Sinacofi_C45.indice3 - %Sinacofi_C45.indice2 - 1);
%Sinacofi_C45.NombreArchivo:= getSubString(getAttribute( "B2BXGIReceive_ConsumptionFilename" ), %Sinacofi_C45.indice3 + 1, length(getAttribute( "B2BXGIReceive_ConsumptionFilename" )) - %Sinacofi_C45.indice3 - 4);
%Sinacofi_C45.CodigoBanco:= Sinacofi_C45.GetEntidadByCasilla(getSubString(\Details\Detalles, 21, 20) );
%Sinacofi_C45.TipoArchivo:= "Archivo control de datos";
if ( 1=1 ) then
True]]></DmlExpression>
            <DmlComment/>
         </CheckConstraint>
         <CheckConstraint name="ValidationCode07_V6" order="1">
            <DmlExpression><![CDATA[%Sinacofi_C45.CodigoError:= "007";
if((Sinacofi_C45.CountCasillaByCasilla(trimString(getSubString(\Details\Detalles, 21, 20)))) = 0)
then
{     
	%Sinacofi_C45.var_error1:= Sinacofi_C45.InsertErrorTBL(
		%Sinacofi_C45.correlativoPrefijo,
		%Sinacofi_C45.CodigoError, 
		%Sinacofi_C45.TipoArchivo, 
		formatString(getDateAndTime(), "CCYY'-'MM'-'DD hh':'mm':'ss"))
};
True]]></DmlExpression>
            <DmlComment/>
         </CheckConstraint>
         <CheckConstraint name="ValidationCode06_V7" order="2">
            <DmlExpression><![CDATA[%Sinacofi_C45.CodigoError:= "006";
if((Sinacofi_C45.CountCasillaByCasilla(trimString(getSubString(\Details\Detalles, 41, 20))))= 0)
then
{     
	%Sinacofi_C45.var_error1:= Sinacofi_C45.InsertErrorTBL(
	%Sinacofi_C45.correlativoPrefijo,
	%Sinacofi_C45.CodigoError, 
	%Sinacofi_C45.TipoArchivo, 
	formatString(getDateAndTime(), "CCYY'-'MM'-'DD hh':'mm':'ss"))
};
True]]></DmlExpression>
            <DmlComment/>
         </CheckConstraint>
         <CheckConstraint name="ValidationCode05_V17" order="3">
            <DmlExpression><![CDATA[%Sinacofi_C45.CodigoError:= "005";
if(trimString(getSubString(\Details\Detalles, 21, 20)) <> %Sinacofi_C45.usuarioPrefijo)
then
{
	%Sinacofi_C45.var_error1:= Sinacofi_C45.InsertErrorTBL(
	%Sinacofi_C45.correlativoPrefijo,
	%Sinacofi_C45.CodigoError, 
	%Sinacofi_C45.TipoArchivo, 
	formatString(getDateAndTime(), "CCYY'-'MM'-'DD hh':'mm':'ss"))
};
True
]]></DmlExpression>
            <DmlComment/>
         </CheckConstraint>
         <CheckConstraint name="ValidationCode15_V1" order="4">
            <DmlExpression><![CDATA[%Sinacofi_C45.CodigoError:= "015";
if(trimString(\Header\Inicio ) <> "MENSAJE_CONTROL")
then
{     
	%Sinacofi_C45.var_error1:= Sinacofi_C45.InsertErrorTBL(
	%Sinacofi_C45.correlativoPrefijo,
	%Sinacofi_C45.CodigoError, 
	%Sinacofi_C45.TipoArchivo, 
	formatString(getDateAndTime(), "CCYY'-'MM'-'DD hh':'mm':'ss"))
};
True]]></DmlExpression>
            <DmlComment/>
         </CheckConstraint>
         <CheckConstraint name="ValidationCode25_V2" order="5">
            <DmlExpression><![CDATA[%Sinacofi_C45.CodigoError:= "025";
if(
	trimString(\Footer\Fin ) <> "FIN_MENSAJE"
) then {
	%Sinacofi_C45.var_error1:= Sinacofi_C45.InsertErrorTBL(
	%Sinacofi_C45.correlativoPrefijo,
	%Sinacofi_C45.CodigoError, 
	%Sinacofi_C45.TipoArchivo, 
	formatString(getDateAndTime(), "CCYY'-'MM'-'DD hh':'mm':'ss"))
};
True]]></DmlExpression>
            <DmlComment/>
         </CheckConstraint>
         <CheckConstraint name="ValidationCode04_V9" order="6">
            <DmlExpression><![CDATA[%Sinacofi_C45.CodigoError:= "004";
if ( not( getSubString( \Details\Detalles, 71, 1 ) in ( "F", "V") ) ) 
then
{     
	%Sinacofi_C45.var_error1:= Sinacofi_C45.InsertErrorTBL(
	%Sinacofi_C45.correlativoPrefijo,
	%Sinacofi_C45.CodigoError, 
	%Sinacofi_C45.TipoArchivo, 
	formatString(getDateAndTime(), "CCYY'-'MM'-'DD hh':'mm':'ss"))
};
True]]></DmlExpression>
            <DmlComment/>
         </CheckConstraint>
         <CheckConstraint name="ValidationCode02_V11" order="7">
            <DmlExpression><![CDATA[%Sinacofi_C45.CodigoError:= "002";
if(getSubString(\Details\Detalles, 82, 1) <> "A")
then
{     
	%Sinacofi_C45.var_error1:= Sinacofi_C45.InsertErrorTBL(
	%Sinacofi_C45.correlativoPrefijo,
	%Sinacofi_C45.CodigoError, 
	%Sinacofi_C45.TipoArchivo, 
	formatString(getDateAndTime(), "CCYY'-'MM'-'DD hh':'mm':'ss"))
};
True]]></DmlExpression>
            <DmlComment/>
         </CheckConstraint>
         <CheckConstraint name="ValidationCode01_V12" order="8">
            <DmlExpression><![CDATA[%Sinacofi_C45.CodigoError:= "001";
if(getSubString(\Details\Detalles, 83, 1) <> "N")
then
{     
	%Sinacofi_C45.var_error1:= Sinacofi_C45.InsertErrorTBL(
	%Sinacofi_C45.correlativoPrefijo,
	%Sinacofi_C45.CodigoError, 
	%Sinacofi_C45.TipoArchivo,
	formatString(getDateAndTime(), "CCYY'-'MM'-'DD hh':'mm':'ss"))
};
True]]></DmlExpression>
            <DmlComment/>
         </CheckConstraint>
         <CheckConstraint name="ValidationCode03_V10" order="9">
            <DmlExpression><![CDATA[%Sinacofi_C45.CodigoError:= "003";
%Sinacofi_C45.SizeFile:= Sinacofi_C45.GetTamanoByCorrelativo (%Sinacofi_C45.correlativoPrefijo); 
if( getSubString( \Details\Detalles, 71, 1 )="F" and 
convertToI( getSubString( \Details\Detalles, 72, 10 ) ) <> ( %Sinacofi_C45.SizeFile - convertToI( getSubString( \Details\Detalles, 61, 10 ) ) ) / convertToI( getSubString( \Details\Detalles, 61, 10 ) ) 
or ( getSubString( \Details\Detalles, 71, 1 )="V" and 
convertToI( getSubString( \Details\Detalles, 72, 10 ) ) <> ( %Sinacofi_C45.SizeFile - convertToI( getSubString( \Details\Detalles, 61, 10 ) ) ) )
)
then
{     
	%Sinacofi_C45.var_error1:= Sinacofi_C45.InsertErrorTBL(
	%Sinacofi_C45.correlativoPrefijo,
	%Sinacofi_C45.CodigoError, 
	%Sinacofi_C45.TipoArchivo, 
	formatString(getDateAndTime(), "CCYY'-'MM'-'DD hh':'mm':'ss"))
};
True]]></DmlExpression>
            <DmlComment/>
         </CheckConstraint>
         <CheckConstraint name="validationContainer" order="10">
            <DmlExpression><![CDATA[if (%Sinacofi_C45.var_error1<>"") 
 then { 
	false
		} 
else 
True]]></DmlExpression>
            <DmlComment/>
         </CheckConstraint>
      </CheckConstraints>
   </BusinessDocument>
</BusinessDocuments>
